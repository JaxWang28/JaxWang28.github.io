<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Linux on Jackson Blog</title>
    <link>https://blog.jaxwang.top/tags/linux/</link>
    <description>Recent content in Linux on Jackson Blog</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 19 Apr 2025 20:45:06 +0800</lastBuildDate>
    <atom:link href="https://blog.jaxwang.top/tags/linux/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>x86 Linux 启动流程第一阶段 —— setup</title>
      <link>https://blog.jaxwang.top/p/x86-linux-kernet-boot-setup/</link>
      <pubDate>Sat, 19 Apr 2025 20:45:06 +0800</pubDate>
      <guid>https://blog.jaxwang.top/p/x86-linux-kernet-boot-setup/</guid>
      <description>&lt;pre&gt;&lt;code&gt;linux-6.12.4&#xA;QEMU emulator version 8.2.2 (Debian 1:8.2.2+ds-0ubuntu1.6)&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1 id=&#34;魔数-mz&#34;&gt;魔数 MZ&lt;/h1&gt;&#xA;&lt;pre&gt;&lt;code&gt;readelf -x .bstext  arch/x86/boot/setup.elf&#xA;Hex dump of section &#39;.bstext&#39;:&#xA;0x00000000 4d5a0000 00000000 00000000 00000000 MZ..............&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;pre&gt;&lt;code&gt;xxd arch/x86/boot/setup.bin&#xA;00000000: 4d5a 0000 0000 0000 0000 0000 0000 0000  MZ..............&#xA;00000010: 0000 0000 0000 0000 0000 0000 0000 0000  ................&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;pre&gt;&lt;code&gt;(gdb) hb *0x10200&#xA;(gdb) c&#xA;(gdb) x/2c 0x10000&#xA;0x10000 &amp;lt;exception_stacks+16384&amp;gt;:       77 &#39;M&#39;  90 &#39;Z&#39;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1 id=&#34;setup-过程函数跳转&#34;&gt;Setup 过程函数跳转&lt;/h1&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.jaxwang.top/2025/04/1ea16f28231769c5f553393cfd522178.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;_start&#34;&gt;_start&lt;/h1&gt;&#xA;&lt;p&gt;bootloader 将 &lt;code&gt;setup.bin&lt;/code&gt; 加载到 &lt;code&gt;0x10000&lt;/code&gt; 地址处后，将 &lt;code&gt;CS&lt;/code&gt; 置为 &lt;code&gt;0x1020&lt;/code&gt; ，&lt;code&gt;IP&lt;/code&gt; 置为 &lt;code&gt;0x0&lt;/code&gt;。通过计算可以得知地址为 &lt;code&gt;0x10200&lt;/code&gt;。&lt;/p&gt;</description>
    </item>
    <item>
      <title>WSL2 Kernel 升级更换</title>
      <link>https://blog.jaxwang.top/p/wsl2-kernel-update/</link>
      <pubDate>Wed, 14 Aug 2024 11:04:51 +0800</pubDate>
      <guid>https://blog.jaxwang.top/p/wsl2-kernel-update/</guid>
      <description>&lt;p&gt;&lt;strong&gt;! Warning&lt;/strong&gt;&lt;br&gt;&#xA;If you have multiple distros installed, they will all use the same kernel.&lt;br&gt;&#xA;WSL2 中不同发行版使用的是同一个内核。&lt;br&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;0x01-准备&#34;&gt;0x01 准备&lt;/h1&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;源码&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;pre&gt;&lt;code&gt;git clone https://github.com/microsoft/WSL2-Linux-Kernel.git&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;ol start=&#34;2&#34;&gt;&#xA;&lt;li&gt;toolchain&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;pre&gt;&lt;code&gt;sudo apt update &amp;amp;&amp;amp; sudo apt install build-essential flex bison libssl-dev libelf-dev bc python3 pahole&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;ol start=&#34;3&#34;&gt;&#xA;&lt;li&gt;查看源码分支选择版本&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;pre&gt;&lt;code&gt;# 查看所有版本&#xA;git tag &#xA;&#xA;# 选择目前最新版本&#xA;git checkout linux-msft-wsl-6.6.36.3&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1 id=&#34;0x02-构建&#34;&gt;0x02 构建&lt;/h1&gt;&#xA;&lt;pre&gt;&lt;code&gt;make menuconfig KCONFIG_CONFIG=Microsoft/config-wsl&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;pre&gt;&lt;code&gt;make -j$(nproc) KCONFIG_CONFIG=Microsoft/config-wsl&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1 id=&#34;0x03-安装&#34;&gt;0x03 安装&lt;/h1&gt;&#xA;&lt;pre&gt;&lt;code&gt;sudo make modules_install headers_install&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;pre&gt;&lt;code&gt;cp arch/x86/boot/bzImage /mnt/c/User/&amp;lt;username&amp;gt;/bzImage&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;创建 &lt;code&gt;%USERPROFILE%\.wslconfig&lt;/code&gt; 并添加下面内容&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
