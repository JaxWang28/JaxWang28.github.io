<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Protocol on Jackson Blog</title>
    <link>https://blog.jaxwang.top/tags/protocol/</link>
    <description>Recent content in Protocol on Jackson Blog</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 16 May 2025 14:12:00 +0800</lastBuildDate>
    <atom:link href="https://blog.jaxwang.top/tags/protocol/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>I2C 通信协议</title>
      <link>https://blog.jaxwang.top/p/i2c-protocol/</link>
      <pubDate>Fri, 16 May 2025 14:12:00 +0800</pubDate>
      <guid>https://blog.jaxwang.top/p/i2c-protocol/</guid>
      <description>&lt;h1 id=&#34;i2c-通信协议&#34;&gt;I2C 通信协议&lt;/h1&gt;&#xA;&lt;p&gt;I2C 是一种&lt;strong&gt;系统内部协议&lt;/strong&gt;，即在系统内多个集成电路(IC)间的通讯。其支持 3 种传输模式，本文不对 3 种传输模式展开，仅分析基本原理。&lt;/p&gt;&#xA;&lt;h2 id=&#34;一物理层&#34;&gt;一、物理层&lt;/h2&gt;&#xA;&lt;p&gt;I2C 通信设备之间的常用连接方式如下：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.jaxwang.top/2025/05/1746f76b8a598ac9083caf25e73ea9cc.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;一条 I2C 总线包含两条线路：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;SDA：双向串行数据线，用来传输数据&lt;/li&gt;&#xA;&lt;li&gt;SCL：串行时钟线，用来同步时钟&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;一条 I2C 通信总线可以连接多个 I2C 通信设备，包含多个主机或从机&lt;/li&gt;&#xA;&lt;li&gt;每个总线上的设备都有一个独立的地址，主机利用这个地址访问不同的从机设备&lt;/li&gt;&#xA;&lt;li&gt;总线通过上拉电阻接到电源。当I2C设备空闲时，会输出高阻态， 而当所有设备都空闲，都输出高阻态时，由上拉电阻把总线拉成高电平&lt;/li&gt;&#xA;&lt;li&gt;多个主机同时使用总线时，为了防止数据冲突， 会利用仲裁方式决定由哪个设备占用总线&lt;/li&gt;&#xA;&lt;li&gt;连接到相同总线的 IC 数量受到总线的最大电容 400pF 限制&lt;/li&gt;&#xA;&lt;li&gt;I2C 总线具有 3 种传输模式：&#xA;&lt;ol&gt;&#xA;&lt;li&gt;标准模式：100kbps&lt;/li&gt;&#xA;&lt;li&gt;快速模式：400kbps&lt;/li&gt;&#xA;&lt;li&gt;高速模式：3.4Mbps，目前大多数 I2C 设备尚不支持&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;关于 I2C 为什么使用上拉电阻，有下面 3 个原因（数电知识）：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;SDA和SCL线均为漏极开路驱动器&lt;/li&gt;&#xA;&lt;li&gt;它可以将输出驱动为低电平，将其驱动为高电平&lt;/li&gt;&#xA;&lt;li&gt;为了使线路能够变高，您必须提供上拉电阻&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;不同于 RS-232 串口通信，I2C 拥有一条时钟线，为同步传输，其数据有效性如下：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;SCL为高电平的时候SDA表示的数据有效：SDA 为高电平时表示逻辑1， 为低电平时表示逻辑0&lt;/li&gt;&#xA;&lt;li&gt;SCL为低电平的时候SDA表示的数据无效：SDA 一般在这个时候进行电平切换&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.jaxwang.top/2025/05/b023386cd13cf1971813db9ee2b7c1f4.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;二协议层&#34;&gt;二、协议层&lt;/h2&gt;&#xA;&lt;p&gt;I2C 的通信过程是&lt;strong&gt;由主机发起的，支持主机写数据到从机和主机在从机中读数据&lt;/strong&gt;，其过程如下图：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.jaxwang.top/2025/05/2b0cafa288aa0740a608ca59a5ae7cb3.jpeg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://img.jaxwang.top/2025/05/00b6f43c6d80736921627bb7b5741d56.jpeg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;起始信号 S 当 SCL 线是高电平时 SDA 线从高电平向低电平切换，这个情况表示通讯的起始。起始和停止信号一般由主机产生。&#xA;&lt;img src=&#34;https://img.jaxwang.top/2025/05/35e8b3ffbcc8f9e9f2f561d07c69755d.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
